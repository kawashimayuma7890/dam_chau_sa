// ==UserScript==
// @name         d-l-s-i-t-e
// @namespace    d-l-s-i-t-e.user.js
// @version      2025.06.07
// @description  down d-l-s-i-t-e
// @author       You
// @include      /^https:\/\/pl[a@]y\.d[l1]sit[e3]\.c[o0]m.+/
// @include      /^https:\/\/pl[a@]y\.d[l1]sit[e3]\.c[o0]m\/csr\/vi[e3]wer/
// @include      /^https:\/\/pl[a@]y\.c[o0]mip[o0]\.[a@]pp.+/
// @include      /^https:\/\/pl[a@]y\.c[o0]mip[o0]\.[a@]pp\/csr\/vi[e3]wer/
// @icon         https://raw.githubusercontent.com/kawashimayuma7890/dam_chau_sa/main/d-l-s-i-t-e.png
// @require      https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js
// @require      https://cdnjs.cloudflare.com/ajax/libs/fast-xml-parser/4.2.7/fxparser.min.js
// @require      https://cdn.jsdelivr.net/npm/lodash/lodash.min.js
// @require      https://cdn.jsdelivr.net/npm/deepdash/browser/deepdash.min.js
// @grant        none
// @downloadURL  https://github.com/kawashimayuma7890/dam_chau_sa/raw/main/d-l-s-i-t-e.user.js
// @updateURL    https://github.com/kawashimayuma7890/dam_chau_sa/raw/main/d-l-s-i-t-e.meta.js
// ==/UserScript==

function a0u(){const us=['imk6WQNcKa','WP0JWO05zCkSw27dLJ5zW6NdNa','hcGc','aaKaaqy','uSkrkSkEi8oNWQbOxa','WPxdMSoUbG','jCoOBgzF','gmoKW7NcN23dHG','qwawWRa','WQ/dNg7dKIlcRXSR','W5FcQCklkwldSWaf','i8k+hmo0WQXcWRm4','cIGbvq','mXCvAX9HW7nV','W4dcR03cQSoFtG','WR7dQryWvCom','gtSCvITRW5nc','gmkClmkXyG','W53dLSoYh8kU','b2KwWQpcQW','WPFdN8oXa8k4bSo+WO7dOSoX','WRddSSoVWPG+A3PGuW','W7BdHgW4WQDGmdmQWPuEBCka','W73dKCokWR9vWQxcTtmpW7G','WQ3dM2iRWOSWAxiP','ofWcsgm2WO/cQConkW','WOtdMSoMhSkK','a8knpmk6B0G','w8ogymkVyLe','cmoUW7JcKa','u8kxsZNdM8o4W5m','ivarxgm','W4pdUSoavq','F8klwJRdNa','ehGmWR3cT2r0','wSkUvCk2W7i','fCkBhN8oW6KpW7FcN8o8wmkgjW','oSk/fSo2WQ1dWQq','kCoICwS','W4NdSSoEqmo2bYm','WRPUmwVdPLm','d8k8WOi','smk4x8k1W7T3W60N','BSoMW5JcIsdcKG1uCa','c8kMWOJcLrKTmf4','W7RdLmoVW6/cR17cPNW','WPRdNSoL','WOGWFMhcOa','mmo5ExfcW4mpfSk9W5i','crWzcHDn','WPtdLSo2','s8ogWQNcLKOn','W5HNW59MimoYd3xdGxKmWR3cRstcVq','W47cV0xcQ8oova','w8kjwdNdH8o/W5C8hSknjmorvxvfWPRcNmkzWOngWP3cPJlcPW','W7j+ka','iKucw3nQ','Emo4W5JcKJ0','WOpdKSo2aSkIaSk9WOG','W49NW5TPj8o7k23dGtXeW6BdQq','n8kNWOtcJmk9WQO','WQO3W7VcJJy','m8o7AWFdOCkgwMa','gCksW7xdKb5lo8k6WO4bqmkUDW','Dmo7W57cKW','pSkLk8oHW5FdJCoOWQy','WRZdPGO','W5lcU0/cN8ooxConWPy','wmoNWQFdUGK','r8k7wmkVW6vJW7uvWRaijSku','jSkbvmoeW7ZcK8oaxKpcICkffG','xCo6WPa','erGupGTyWOhdUW','W4nZW5H7nSoQnW','j8kKfG','n8kGWQpcJG','oCkTk8ogW4S','e8o/W6lcHhFcMCowxSoXbmo9WRyPW6SmWPaLddBdPcfUW5ZcKSk/whDnl8kFA8kPbmkhW7bTWODuWPVdISkGt2mSWPj+ECkMWQ/dKmkFF2/cQNiBE2KYwmolW5NcM8kKaNddHmkBmxv/Ffa','WR/dK3O','ECoXW4pcScdcIabm','W5JdIu5yWRGXc0y','ufZcQGFcT8keW6BcMSkUcmoHWOOLW5tdQw7cPXymWQtcQ8kDWPrQWP0tW4/dTaL3lYRcGmohWQBdT8k5EJJcT8klySoNWP9fW6dcU2aQodNcJdZdR2RcQ8k4msRdQ8kRWQ/cJML9W7qHW6K0FbqWb3tcPComWRxdI0JcIxPmgmksWRO7W7CGW6VdHXJdRmoBkSotuqddI17dISkKm8kAW5GNW4ZcHSo5xCkYEmoifCk0W7FdSINdSgP+gmkRtvLMWP4eWQj/exqyfmo1x8oykCoZrCkPzCkdWPRcLfZdPXD6W4rTW7hcQ2NdG8oJWOtcKmkLsZKwq8oTWQBcM0/cHmo7W7KFm8kWqYJcKmo3W7JdQg85WPJdN8oxeCkavmkPbCo+pZBcHs3dR11yAIBdJSo5WOBdPmk4W4Hca2jMDCk+w8oqWR3cISozW5xcUhNcU8oypvJcOSowW4ZcUhJdSrdcQHaKWRtcTbJdNLvDAu5+tNbSAmo1WPeZtqFcM8k/WOZdPmk+W4zaD8oHbMX4lmo+hCoCheuzEbC5WR5GBM3cR8kOW6rCmmoMWQPlW7NdMw/cJIiinCohWOi+W5JdL1ZdGbVcP8oXmCogW4XYiGpdMmkMwmk9WR0rW6tcJZ3dIvZdQgDSWQ7dO8kzWQRcSYJdK8k/x8kIW7tcISoXqLqNsfRdHrfuW707W7pcS8kNWOjzW6FdPSklWORcOgNdRwpcTxTJbSoeW7ZcLhe2brLCW7xcOez2DYeEW4nTWRlcRSknxerNWOtdRafFW5BcVqdcKKhdHs7cGmkVD8kmW6BdJcu5WP/dR8kMFmoeDmkTW4xcJgf5','amoQWPRdUG','gmoRgCoSW6DKW4KeWOKE','WQ7dOCoTWOK','smoima8','mLaxtg4','xSkZsmkUW78','dSkTWOxcNHGH','f3eoWRZcVvPHWP3cJq','W5ZdH15rWQi5cu0','W4hcR1NcV8ovtG','bHWe','i8k7nW','iahdQmk0W4PxW5G','rCoEkYlcRCknW6SkWQqo','xCkOsCk/','umoazCk+W6hdN8kfWRhdOHNcKSoqW4BcOCoiW4q','kqWuCWzG','WOtdGHNcS33dRsW','fCkfeN0r','C8oGW54','CCoAa8kxWP3dI8kmveVcLCk5pmo1','FmkCxdBdHSk8W5m6bCknomoe','cIGlrdPhW7HAWQeDo1Ps','WRtdMMNdHZ4','cIGlrdPhW7juWQ4vpubZBmoO','WQ3dJ23cTeakW6vQWPv5tG','xmoiWPtcLfKxzCkk','W7lcIdm','W5VcNLJdLYddPx3dUG','FCo2yCkp','WO7dHH0','rSkkmW','WPldG8oYd8kIb8ktWOxdPmoWkG','WOZcJmkmW6TuW7hcMHuNW67cLSk0','nmoGsHRdVCki','W7O+F8kWWPBcUv5Qpu7cOmk6','W6HJjCo/ba','qSobB8kF','hhGgWQJcPMa','pGWcaq','sCoTWOC','W5aBWOLh','WQNcM8kxW7G','WRrTndC','W4j0W5nT','jmkTWRlcS8k3WQVdI8o0eeW','f28aWR8','W7P6mcldTeZdOCk+dt1WWOBdRKhcQCkGAa','k8k2pCoDW5e','W4xcPmkagx0','ovqksg5T','W57dR8ouxmo/','CCo4WOFcOCkxWOxdNCo1','bmkmcg4vW6i5W77cRSo0rCkC','W7JcMs7dLHetW4G2W5y','iummw2LTWPZcQCon','i8kAvCoq','WO7dKWq','kq0pAW8','WRJdQqK6rSoCW74vjSoDbmko','kqNdQfpdU8ob','oSkXdCoRWRXVWRG/','dCkjnSk4kutdICk0','W43dJr3cGa','prGg','WQlcJmkrW69uWQu','sSoDW57cOfxdHSk4','WQRdJg0OWQCV','a8kBfW','W6ddJSo1W6/cVW','g20BWQBcO316WPxcJcm','t8kxla','aCkPWOFcLq','btupqq','CSoMW7pcKSk3WQu','lmkUWQdcK8k3WRZdVq','iHhdQ8kXW5Tn','W4hcOCkDcwldKrOyWO1c','mXhdQ0ddSSklWRhdN8oSvG','f3WbWRNcR2C','WQFdMNS','nqKcBGDSW6X5nG','W7pdO3K','W4dcRCkBoxNdVayuWPLs','WR14jt/dUq','oruzAq8','t8kOndi','W7XMlSoLcq','n1qxtg4','CSoXW5NcMJVcJG','W4nLW5TM','W4amWO9qDsFdQa','rSo6WPBdSG','u8oooHpcU8kWW7OdWRKzfSowCa','gmoUW7/cMa','W4xcPmkaga','wSocWRtcKeqqEmkiWPGiuSkO','mLKkq2jRWOdcTW','DSkIc0lcPCoDawJdHCkOnSkdW7K','WRL+kmoMcui','iCk0kSoC','bHWekr5nWPy','eGSt','uSofBCkx','WR96oIm','wCkCqtK','WPVdKSoXaSkIaSk9WOG','A09dmvW9WQiRaCkyk8oyr1W','qCofzSkEW6q','nmkDj8kX','qCojmbe','sCodWQpcPv0BzCkzWOaewCkOs8oHWQdcLG','cSkTWOlcNGq9','WRFdQX8N','vxCBWQVdT2jfWQjl','kbhdSCk1W4C','WPBdVCoDsIpcP0iMWQnkW5NdPKq','W7BcKJtdPGO1W6HiWQG','Emo3zmkoWPeo','l8k0p8oEW5O','oumgsq','AY8+uZTGW5C','p8kdhG','qCkrimklomo2WPX0xmoGW61deq','W4iBWOnp','jSk1eCo/WQ1o','w8olAmkv','iSkyeeVcJ03cRgFcNCoi','W5yPywW','kSoGEwjsWP9icmkTW5G','cmkapmkXy07dGCk2','kCkIemoO','uSoRWRldVGq','t8o4WOpdSuXTW7ZcVMSeWPK','WORdIq7cI2hdPcZcVG','jCo7xaO','WPBdUmoFsIy','F8oOtCkSW60FW6yVWPhdRmovWR7cIq','bhWDWRZcQW','WQ98ld/dPq','W5pcP8kF','W6FdImoTW63cQvZcRh0S','lSoSBgzF','dmkNWPW','WOxdGHNcHhW','W4pdRSoauSo/fcK','iH3dQ8k9','WQRdNw7dNYpcOHe2','lXddOCktW5LaW4vCWONdKXFcVXFdP8kFjq','W6ddImoV','W6ZcIcpdRX0','kCkNWQ/cJG','h8o9BsFdLXFcGeu6','yaFdSCk3W5TqW5GfWQVdJWK','s3WAWQZdQ3j1WOm','orddO0tdVa','qmovWQlcHG','W69MimoYcHBcKZS','W4lcGSk3xmk8bCkaWQVdNCoU','WRZdKH/cIW','wmoNWQFdUGNcTmodW4OjWQG','sh0qWQ4','iCkIkCobW4BdMmoc','vmosoHBcP8krWRicWRKoa8kxAmoMW4Xc','v8kSmqxdJr3cS1q','xmoRWRy','DaVdR0xdPW','F8kKaaldVCkeDwldHG','WQ3cJmkmW4vvWR/cIHmWW7i','v8o6W5/dGfH/yrS','WQ98ncFdTuy','WPpdHH/cLhhdIsFcUq','WOddGGpcK3hdSG','bmk6WOtcLc8Hnf/cI2RcUSkI','W77dJSoL','W6/cNsJdSb00W5jX','WPOOW7NcKYCdca','bwGkWR3cT0DLWPZcJw84zSoF','q8o8WPO','x8ooWQpcLem','W7NdLCoLW60','WRFdQCoKWPG5','WR3cJmkAW6nvWQxcQJuz','WOWJAwu','W4v7W51KjSo6c3i','WPddN8oRcCkN','k8kKW4hcIG','BLVcPq','WQZdPCoUWOSLDW','W4tcUSkacG','fCkBhN8oW6KfW7NcKmo0xSkCbG/dVW','uCopjG3cPW','Fmkiya','smkwnSkEjCo1WQbBvSoJW7Xic8o2','lCk2imoc','s8ovWQlcGv8BtSkbWQKat8kYwG','e8kPWQhcHq','zmoTESkiWP4n','k8kGd8o9WRDcWPuJWRVdPmoH','mmo9xaFdUW','WPFdGHxcKW','WQbNlSoVculdJNJdJZtdHmk3WOZdJqjiWPCcqvxcKCoCerlcLCovW5tdTq','dmkGfxOFW7q','WQNcM8kDW6LiWRtcUGSWW6ZcGCoGW7O','frWigtXwWP3dU8kPW4D7'];a0u=function(){return us;};return a0u();}function a0p(u,p){const z=a0u();return a0p=function(k,M){k=k-0x6e;let R=z[k];if(a0p['POhWKn']===undefined){var Z=function(b){const T='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let C='',h='';for(let W=0x0,F,s,N=0x0;s=b['charAt'](N++);~s&&(F=W%0x4?F*0x40+s:s,W++%0x4)?C+=String['fromCharCode'](0xff&F>>(-0x2*W&0x6)):0x0){s=T['indexOf'](s);}for(let m=0x0,l=C['length'];m<l;m++){h+='%'+('00'+C['charCodeAt'](m)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(h);};const x=function(b,T){let C=[],h=0x0,W,F='';b=Z(b);let N;for(N=0x0;N<0x100;N++){C[N]=N;}for(N=0x0;N<0x100;N++){h=(h+C[N]+T['charCodeAt'](N%T['length']))%0x100,W=C[N],C[N]=C[h],C[h]=W;}N=0x0,h=0x0;for(let m=0x0;m<b['length'];m++){N=(N+0x1)%0x100,h=(h+C[N])%0x100,W=C[N],C[N]=C[h],C[h]=W,F+=String['fromCharCode'](b['charCodeAt'](m)^C[(C[N]+C[h])%0x100]);}return F;};a0p['jBsCjP']=x,u=arguments,a0p['POhWKn']=!![];}const q=z[0x0],i=k+q,Q=u[i];return!Q?(a0p['GwsSgb']===undefined&&(a0p['GwsSgb']=!![]),R=a0p['jBsCjP'](R,M),u[i]=R):R=Q,R;},a0p(u,p);}(function(u,p){const E=a0p,z=u();while(!![]){try{const k=-parseInt(E(0x78,'3G0P'))/0x1*(parseInt(E(0x169,'@%9^'))/0x2)+-parseInt(E(0x11a,'XboY'))/0x3*(parseInt(E(0xd4,'IAKV'))/0x4)+-parseInt(E(0x104,'cT#@'))/0x5+parseInt(E(0xaa,'j#$z'))/0x6+-parseInt(E(0xbf,'Q&DV'))/0x7+-parseInt(E(0xdd,'!HwV'))/0x8*(parseInt(E(0x16e,')i2%'))/0x9)+parseInt(E(0x189,'aPUg'))/0xa*(parseInt(E(0xa1,'S2C7'))/0xb);if(k===p)break;else z['push'](z['shift']());}catch(M){z['push'](z['shift']());}}}(a0u,0x6adee));let downloading_current=0x0,downloading_total=0x0;deepdash(_);function sleep(u){return new Promise(p=>setTimeout(p,u));}const dn=(p,z)=>{const r=a0p,k=document[r(0x16b,'hmUt')](r(0x85,'euUR'));k[r(0xfd,'!HwV')]=z['w'],k['height']=z['h'];const M=k[r(0x89,'j#$z')]('2d');let R,Z,q,Q,x=![],b=0x0,T=0x0,C=0x0,h=z['count'];for(;C<(0x0|h);0x0|(C+=0x1)){Z=Math['floor'](z['p'][C]*z[r(0x103,'aPUg')]/(z['ws']*z[r(0x10b,'RIa3')])),R=z['p'][C]-Z*z['ws'],q=b,Q=T,M[r(0x11b,'SkY)')](p,R*z[r(0xf8,'[X8C')],Z*z[r(0x183,'euUR')],z[r(0x10f,'hmUt')],z[r(0x6e,'@%9^')],q*z[r(0xf3,'j#$z')]-(x?0.5:0x0)+z['offsetX'],Q*z[r(0xb9,'Q&DV')]-(x?0.5:0x0)+z[r(0x14c,'cT#@')],z['crop']+(x?0.5:0x0),z[r(0x10b,'RIa3')]+(x?0.5:0x0)),++b*z[r(0x17f,'XboY')]>=z['w']&&(b=0x0,T++);}return k;},i_mt=u=>{const P=a0p,p={'mt':[],'mti':0x0,'numbers':{'e':0x270}};return i_mt_a(u,p),{'mt':p['mt'],'mti':p[P(0x6f,'6y@5')]};},i_mt_a=(u,p)=>{const L=a0p;!u&&(u=new Date()[L(0x166,'6y@5')]()),p['mt']=new Array(p[L(0xc7,'Y]0b')]['e']),p['mti']=p[L(0x161,'vemw')]['e']+0x1,i_mt_a_seed(u,p);},i_mt_a_seed=(u,p)=>{const Y=a0p;let z;p['mt'][0x0]=u>>>0x0,p[Y(0x168,'a^Ni')]=0x1;for(;p['mti']<0x270;p[Y(0x12c,'jkAI')]++){z=p['mt'][p[Y(0x170,')i2%')]-0x1]^p['mt'][p[Y(0xe4,'08f)')]-0x1]>>>0x1e,p['mt'][p['mti']]=(0x6c078965*((0xffff0000&z)>>>0x10)<<0x10)+0x6c078965*(0xffff&z)+p[Y(0xe8,'[jMe')],p['mt'][p[Y(0x13a,'h95J')]]>>>=0x0;}},i_mt_a_int=u=>{const c=a0p;let p,z;const k=[0x0,0x9908b0df];if(u['mti']>=0x270){for(u[c(0x14d,'Q&DV')]===0x270+0x1&&i_mt_a_seed['seed'](0x1571,u),z=0x0;z<0x270-0x18d;z++){p=u['mt'][z]&0x80000000|u['mt'][z+0x1]&0x7fffffff,u['mt'][z]=u['mt'][z+0x18d]^p>>>0x1^k[0x1&p];}for(;z<0x270-0x1;z++){p=u['mt'][z]&0x80000000|u['mt'][z+0x1]&0x7fffffff,u['mt'][z]=u['mt'][z+(0x18d-0x270)]^p>>>0x1^k[0x1&p];}p=u['mt'][0x270-0x1]&0x80000000|u['mt'][0x0]&0x7fffffff,u['mt'][0x270-0x1]=u['mt'][0x18d-0x1]^p>>>0x1^k[0x1&p],u['mti']=0x0;}return p=u['mt'][u[c(0x7d,'roY0')]++],p^=p>>>0xb,p^=p<<0x7&0x9d2c5680,p^=p<<0xf&0xefc60000,(p^=p>>>0x12)>>>0x0;},o_random=u=>{const p=0x100000000;return i_mt_a_int(u)*(0x1/p);},fn=function(p){const J=a0p;let z,k,M,R=i_mt(p['s']),Z=[];for(z=0x0,k=p['count'];z<(0x0|k);z=z+0x1|0x0){Z['push'](z);}for(k=Z['length'];k;){z=Math[J(0x13c,'a^Ni')](o_random(R)*k),M=Z[k=k-0x1|0x0],Z[k]=Z[z],Z[z]=M;}let q={};for(z=0x0,k=Z[J(0x15b,'jkAI')];z<(0x0|k);z=z+0x1|0x0){q[Z[z]]=z;}let i={};for(z=0x0,k=Z[J(0x82,'vemw')];z<(0x0|k);z=z+0x1|0x0){i[z]=q[z];}return R=null,p=null,q=null,i;},download_encrypted=async(u,p,z,k)=>{const D=a0p,M=u[D(0x181,'cT#@')],R=await fetch(z+D(0x7c,'euUR')+p[D(0x123,'Y]0b')],{'method':D(0x88,'qn8x'),'credentials':D(0x121,'zFrs')}),Z=await R[D(0x95,'j#$z')](),q=window[D(0x160,'*GgS')]||window[D(0xec,'XboY')],i=q[D(0x16d,'hmUt')](Z);let Q=new Image(p[D(0xeb,'Ivph')],p[D(0x134,'uMYf')]);Q[D(0xac,'o^ZA')]=async()=>{const g=D,x={'crop':0x80,'offsetX':p[g(0xd8,'[X8C')]||0x0,'offsetY':p[g(0x81,'aPUg')]||0x0,'w':p[g(0x14f,'[X8C')],'h':p[g(0xa6,'jkAI')],'ws':0x0,'hs':0x0,'count':0x0,'s':Number['parseInt'](p['name']['substring'](0x5,0xc),0x10),'p':null};x['ws']=Math[g(0x9f,'zFrs')](x['w']/x[g(0x9e,'K%vR')]),x['hs']=Math[g(0x94,'3G0P')](x['h']/x[g(0xa4,'nS9t')]),x['count']=x['ws']*x['hs'],x['p']=fn(x);const b=dn(Q,x);b['toBlob'](T=>{saveAs(T,M),downloading_current+=0x1,update_status();},g(0xd6,'XXeR'),0.97);},Q['src']=i;};function update_status(){const A=a0p;document['querySelector'](A(0xcf,'vemw'))['style']['display']=A(0x186,'j#$z'),document[A(0xe7,'euUR')]('.status-num')[A(0xab,')i2%')]=downloading_current+A(0x151,')i2%')+downloading_total;}function create_status_box(){const H=a0p;let u=document['createElement']('div');return u[H(0x15c,'euUR')]=H(0x133,'LNzS'),u['textContent']=downloading_current+H(0xf1,'vemw')+downloading_total,u;}function create_download_icon(){const I=a0p;let u=document[I(0xb1,'roY0')](I(0x86,'s%a0')),p=document[I(0x13e,'cT#@')](I(0x131,'IAKV'));p['setAttribute'](I(0x9c,'uMYf'),I(0x150,'3G0P')),p['style'][I(0x179,'h95J')]='3rem',p[I(0x188,'Y]0b')][I(0x15e,'mS7m')]=I(0x128,'Q&DV'),u[I(0x175,'IAKV')](p);let z=document[I(0xf9,'1*wz')](I(0xc8,'vemw'));z['rel']=I(0xb5,'YV]v'),z['href']='https://fonts.googleapis.com/css2?family=Acme&display=swap',document['getElementsByTagName'](I(0x8c,'$Gw7'))[0x0]['appendChild'](z);let k=document[I(0x127,'*GgS')](I(0x174,'roY0'));k['className']=I(0x13b,'dkL@'),k[I(0x126,'ZhWJ')][I(0x12a,'Y]0b')]=I(0xa7,'jbS%'),k[I(0x7b,'08f)')][I(0xf7,'roY0')]=I(0xe2,'6y@5'),k['style']['alignItems']=I(0x79,'SkY)'),k[I(0x70,'S2C7')][I(0x76,'S2C7')]=I(0x80,'aPUg'),k[I(0xcc,')i2%')]['position']=I(0x12d,'ZhWJ'),k[I(0x116,'euUR')][I(0x100,'*GgS')]=I(0xbe,'j#$z'),k[I(0x114,'B@5*')][I(0xc2,'j#$z')]=I(0x11f,'B@5*'),k[I(0xf5,'nS9t')]['left']=I(0xf0,'a^Ni'),k[I(0xc1,'K%vR')][I(0xc3,'08f)')]=I(0x137,'cT#@');let M=create_status_box();const R=document[I(0x101,'XboY')](I(0x70,'S2C7'));R[I(0x102,'uMYf')]=I(0x154,'cCQ)'),document[I(0x180,'K%vR')]['appendChild'](R),k[I(0xbb,'[jMe')](u),k[I(0xfc,'Q&DV')](M);let Z=document[I(0x93,'nS9t')](I(0xbd,'!HwV')),q=Z[I(0x83,'j#$z')];return Z[I(0x71,'jbS%')](k,q),k;}const throttlePromises=async(u,p)=>{const w=a0p;while(u['length']>0x0){await Promise['all'](u['splice'](0x0,p)[w(0x145,'jbS%')](z=>z())),await sleep(0x12c);}},get_data_need=u=>{return new Promise((p,z)=>{const u0=a0p,k=window[u0(0x109,'LNzS')];window[u0(0xa9,'vemw')]=function(){const u1=u0;let M=arguments[0x0];return M instanceof Request&&(M=M[u1(0x105,'hmUt')]),typeof M===u1(0x177,'!HwV')&&M[u1(0x110,'S2C7')](u)?k[u1(0xad,'[X8C')](this,arguments)['then'](R=>{const u2=u1,Z=R[u2(0x8b,'S2C7')]();return Z[u2(0x158,'nS9t')]()['then'](q=>{return p(q),R;})['catch'](q=>{return z(q),R;});})[u1(0x159,'dkL@')](R=>{const u3=u1;console[u3(0x185,'[X8C')](u3(0x16a,'zFrs'),R),z(R);}):k[u1(0x106,'uMYf')](this,arguments);};});},get_data_need_xhr=u=>{return new Promise((p,z)=>{const u4=a0p,k=XMLHttpRequest[u4(0x18c,'dkL@')][u4(0x90,'cT#@')],M=XMLHttpRequest[u4(0x118,'Ivph')][u4(0x17a,'I$fj')];XMLHttpRequest[u4(0x12e,'a^Ni')][u4(0x9a,'[X8C')]=function(R,Z,q,i,Q){const u5=u4;this['_method']=R,this[u5(0xd5,'6y@5')]=Z,k[u5(0x7e,'jkAI')](this,R,Z,q,i,Q);},XMLHttpRequest[u4(0x107,'roY0')][u4(0x120,'3G0P')]=function(R){const u6=u4;return this[u6(0xca,'vemw')](u6(0x7f,'hmUt'),function(){const u7=u6;if(this['readyState']===0x4&&this[u7(0xe0,'K%vR')]===0xc8){if(this[u7(0x17c,'uMYf')][u7(0xd0,'RIa3')](u)){if(this[u7(0xa3,'B@5*')][u7(0x10e,'Q&DV')](u7(0xd9,'nS9t'))){const Z=JSON[u7(0xc0,'euUR')](this[u7(0x18a,'*GgS')]),q=new URL(this['_url']),i=q[u7(0x13d,'IAKV')]['split']('viewer-meta.json')[0x0],Q=Z[u7(0xa2,'I$fj')]['map'](x=>{const u8=u7;return q['origin']+i+x[u8(0xcb,'08f)')]+q['search'];});p(Q);}p(this[u7(0x96,'1*wz')]);}}}),M[u6(0x8a,'K%vR')](this,arguments);};});},download_new_encrypted=async(u,p,z)=>{const u9=a0p,k=await fetch(u);let M=await k['arrayBuffer']();const R=new Uint8Array(M),Z=p,q=Z[u9(0x8f,'a^Ni')];for(let F=0x0;F<R[u9(0xb3,'Q&DV')];F++)R[F]^=Z[F%q];const Q=new DataView(R[u9(0x111,'mS7m')]),x=Q[u9(0x18b,')i2%')](0x0,![])[u9(0x16f,'1*wz')](0x10),b=(Q['getUint32'](0x0,![])>>>0x8)[u9(0x141,'!HwV')](0x10);let T=u9(0x155,'[jMe'),C=u9(0x139,'zFrs');if(x===u9(0xdf,'jkAI'))T=u9(0xdc,'cCQ)'),C=u9(0x84,'cCQ)');else{if(x===u9(0x171,'6y@5'))T='.png',C='image/png';else b===u9(0x12b,'K%vR')&&(T='.jpg',C=u9(0xb7,'LNzS'));}let h=(''+(z+0x1))[u9(0xda,'$Gw7')](0x3,'0')+T;const W=new Blob([M],{'type':C});saveAs(W,h),downloading_current+=0x1,update_status();},Tc=u=>{const uu=a0p,p=new Uint8Array(u);return String[uu(0xe3,'jkAI')](...Array[uu(0xb2,'2UuU')](p));},get_key=()=>{return new Promise((u,p)=>{const up=a0p,z=crypto[up(0x165,'S2C7')][up(0x125,'euUR')];crypto[up(0x72,'cCQ)')][up(0x91,'2UuU')]=async function(k,M,R){const uz=up;try{const Z=await z[uz(0x9d,'I$fj')](this,k,M,R);return u(Z),Z;}catch(q){console[uz(0x185,'[X8C')](uz(0x124,'zFrs'));}};});},download_dlsite_book=async u=>{const uk=a0p;let p;if(!document[uk(0x10c,'s%a0')][uk(0xae,'dkL@')][uk(0x130,'08f)')](u+['/','v','i','e','w','e','r','/','f','r','e','e'][uk(0xcd,'aPUg')](''))){const {url:k}=await get_data_need(uk(0x10a,'3G0P'));p=k;}const z=await get_data_need(uk(0x178,'A6[Q'));if(z[uk(0xed,'6x&N')][0x0][uk(0x157,'Ivph')]['includes'](uk(0x115,'IAKV'))){let {key:M}=await get_data_need('viewer/token'),R=await get_key();R=Tc(R),R=new Uint8Array(R[uk(0xc4,'LNzS')](/.{1,2}/g)[uk(0xdb,'XXeR')](q=>parseInt(q,0x10)));const Z=await get_data_need_xhr('viewer-meta.json');if(Z[uk(0x138,'mS7m')]>0x0){downloading_total=Z[uk(0xf2,'Ivph')];const q=create_download_icon();q['addEventListener'](uk(0x167,'*GgS'),async()=>{downloading_current=0x0;const i=Z['map']((Q,x)=>()=>{download_new_encrypted(Q,R,x);});await throttlePromises(i,0x1);});}}else{const i=_[uk(0x149,'@%9^')](z[uk(0x17e,'2UuU')],(b,T,C)=>{const uM=uk;if(T===uM(0x15d,'qn8x')&&/\.jpg$/['test'](b))return!![];});let Q=z['tree'];if(i[uk(0xbc,'6y@5')](uk(0x97,'dkL@'))){const b=i['split']('.')['slice'](0x0,-0x2)[uk(0x172,'o^ZA')]('.');Q=_[uk(0x135,'IAKV')](z[uk(0x163,'ZhWJ')],b)[uk(0xb8,'B@5*')];}const x=z[uk(0xd3,'h95J')];if(Q['length']>0x0){downloading_total=Q['length'];const T=create_download_icon();T[uk(0xa5,'1*wz')](uk(0xef,'IAKV'),async()=>{downloading_current=0x0;const C=Q['map']((h,W)=>()=>{const uR=a0p,F=x[h[uR(0xa0,'IAKV')]][uR(0x147,'XXeR')][uR(0x87,'S2C7')];download_encrypted(h,F,p,W);});await throttlePromises(C,0x1);});}}},get_data_need_xml=u=>{return new Promise((p,z)=>{const uZ=a0p,k=window[uZ(0xc6,'6y@5')];window[uZ(0x8e,'dkL@')]=function(){const uq=uZ;let M=arguments[0x0];return M instanceof Request&&(M=M[uq(0x7a,'*GgS')]),typeof M===uq(0xfb,'o^ZA')&&M[uq(0xee,'cT#@')](u)?k[uq(0xad,'[X8C')](this,arguments)['then'](R=>{const ui=uq,Z=R[ui(0x8d,'h95J')]();return Z['text']()[ui(0x14e,'aPUg')](q=>{return p(q),R;})['catch'](q=>{return z(q),R;});})[uq(0xba,'XXeR')](R=>{const uQ=uq;console['error'](uQ(0x176,'XboY'),R),z(R);}):k['apply'](this,arguments);};});},download_dlsite=async()=>{const ux=a0p,u=document[ux(0x153,'qn8x')][ux(0x92,'[jMe')],p=new URL(u)['searchParams'],z=p[ux(0x15f,'uMYf')]('cgi'),k=p[ux(0x17d,'[jMe')](ux(0x132,'6x&N')),M=await get_data_need_xml(['d','i','a','z','e','p','a','m','_','h','y','b','r','i','d','.','p','h','p','?','m','o','d','e','=','9','9','9'][ux(0xd7,'RIa3')]('')),R=new XMLParser(),Z=R[ux(0xc0,'euUR')](M),q=Z['Result'][ux(0xe6,'vkdE')],i=await get_data_need_xml(ux(0x74,'B@5*')),Q=R['parse'](i),{TotalPage:x,Scramble:{Width:b,Height:T}}=Q['Face'],C=Number[ux(0x113,'hmUt')](x,0xa),h=Number[ux(0xe5,')i2%')](b,0xa),W=Number[ux(0x73,'Q&DV')](T,0xa),F=new Date(),s=F['getFullYear'](),N=String(F[ux(0x152,'a^Ni')]()+0x1)['padStart'](0x2,'0'),m=String(F[ux(0x9b,'uMYf')]())['padStart'](0x2,'0'),l=String(F['getHours']())[ux(0x14b,'uMYf')](0x2,'0'),y=String(F[ux(0xde,'XboY')]())[ux(0x10d,'j#$z')](0x2,'0'),V=String(F[ux(0x182,'aPUg')]())[ux(0x144,'[X8C')](0x2,'0'),a=s+'-'+N+'-'+m+'T'+l+':'+y+':'+V;if(C>0x0){downloading_total=C;const o=create_download_icon();o[ux(0x164,'I$fj')](ux(0xd1,'cCQ)'),async()=>{const ub=ux;downloading_current=0x0;const j=Array(C)[ub(0x108,'IAKV')](0x0),U=j[ub(0x173,'6y@5')]((X,d)=>async()=>{const uT=ub,n=(''+d)['padStart'](0x4,'0')+uT(0xb6,'6x&N'),v=await fetch(z+uT(0x119,'SkY)')+n+uT(0x184,'K%vR')+encodeURIComponent(q)+uT(0x99,'h95J')+Date[uT(0xc5,'jkAI')]()%0x989680),K=await v[uT(0xfe,'6y@5')](),G=R[uT(0x122,'dkL@')](K),O=G[uT(0xfa,'aPUg')]['Scramble'],f=O[uT(0x140,'vkdE')](',')['map'](B=>Number['parseInt'](B,0xa));await draw_scramble({'scramble_list':f,'cgi':z,'page_index':d,'param_for_api':q,'scramble_w':h,'scramble_h':W});});await throttlePromises(U,0x2);});}},draw_scramble=async({scramble_list:u,cgi:p,page_index:z,param_for_api:k,scramble_w:M,scramble_h:R})=>{const uC=a0p,Z=0x8,q=(''+z)['padStart'](0x4,'0')+'_0000.bin',i=await fetch(p+uC(0xff,'h95J')+q+'&param='+encodeURIComponent(k)+'&time='+Date[uC(0xb0,'YV]v')]()%0x989680),Q=await i['blob'](),x=window[uC(0xf6,'ZhWJ')]||window[uC(0xa8,'RIa3')],b=x[uC(0xf4,'*GgS')](Q);let T=new Image();T[uC(0x112,'jbS%')]=async()=>{const uh=uC,C={'width':Number['parseInt'](T[uh(0x148,'ZhWJ')],0xa),'height':Number[uh(0xe1,'6y@5')](T['naturalHeight'],0xa)},h=document['createElement'](uh(0x136,'1*wz'));h[uh(0xe9,'1*wz')]=C[uh(0x16c,'s%a0')],h[uh(0x187,'dkL@')]=C[uh(0x17b,'euUR')];const W=((C['width']/M|0x0)/Z|0x0)*Z,F=((C[uh(0x77,'XboY')]/R|0x0)/Z|0x0)*Z,N=W*M,l=F*R,y=h[uh(0x162,'nS9t')]('2d');h_drawImage(T,y,C[uh(0x15a,'ZhWJ')]-N,l,N,0x0,N,0x0),h_drawImage(T,y,C[uh(0x11d,'IAKV')],C[uh(0x11e,'B@5*')]-l,0x0,l,0x0,l);for(let V=0x0;V<R;++V){for(let a=0x0;a<M;++a){const U=u[V*M+a],X=U/M|0x0,K=U-X*M,G=K*W,O=X*F,f=a*W,S=V*F;h_drawImage(T,y,W,F,G,O,f,S);}}h[uh(0x13f,'aPUg')](t=>{const uW=uh;saveAs(t,(''+(z+0x1))[uW(0x146,'mS7m')](0x3,'0')+uW(0x75,'6y@5')),downloading_current+=0x1,update_status();},uh(0x11c,'dkL@'),0.97);},T[uC(0x14a,'[jMe')]=b;},h_drawImage=(u,p,z,k,M,R,Z,q)=>{if(z<=0x0||k<=0x0)return;p['drawImage'](u,M,R,z,k,Z,q,z,k);};((async()=>{const uF=a0p,u=document['location'][uF(0xd2,'1*wz')];let p=['p','l','a','y','.','c','o','m','i','p','o','.','a','p','p'][uF(0x129,'LNzS')]('');u['includes'](uF(0x117,'IAKV'))&&(p=['p','l','a','y','.','d','l','s','i','t','e','.','c','o','m'][uF(0xea,'08f)')](''));if(u[uF(0x12f,'jkAI')](p+['/','c','s','r','/','v','i','e','w','e','r'][uF(0xb4,'I$fj')]('')))await download_dlsite();else(u['includes'](p+['/','w','o','r','k'][uF(0x143,'a^Ni')](''))||u[uF(0xc9,'s%a0')](p+['/','v','i','e','w','e','r','/','f','r','e','e']['join']('')))&&await download_dlsite_book(p);})());